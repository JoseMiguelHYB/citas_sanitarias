<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Panel Paciente</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    body { background-color: #f2fdfc; }
    .main-card { background: #fff; border-radius: 12px; padding: 2rem; box-shadow: 0 4px 10px rgba(0,0,0,.1); border-top: 6px solid #009688; }
    .bienvenida h1 { color: #009688; font-weight: bold; }
    .list-group a:hover { background-color: #b2dfdb; color: #004d40; }
    .menu-card { max-width: 960px; margin-inline: auto; }
    .content-card { background: #fff; border-radius: 12px; padding: 1.25rem; box-shadow: 0 4px 10px rgba(0,0,0,.06); border: 1px solid #e8f3f2; }
    .content-header { color:#00695c; font-weight: 700; }
    .muted { color:#6b7c7a; }
    .empty { border:2px dashed #cfe9e7; border-radius: 12px; padding: 1.25rem; text-align: center; color:#5e6b6a; }
  </style>
</head>
<body>
  <div class="container my-5 menu-card">
    <div class="main-card">
      <!-- Bienvenida -->
      <div class="text-center bienvenida mb-4">
        <h1>🙎‍♂️ ¡Hola, <span th:text="${paciente.nombre}">Paciente</span>!</h1>
        <p>Bienvenido a tu panel personal. Desde aquí puedes gestionar fácilmente tus citas médicas.</p>
      </div>

      <!-- Menú -->
	  <div class="list-group mb-4">
	      <a th:href="@{/citas/crear}" class="list-group-item list-group-item-action d-flex align-items-center">
	          <span class="fs-3 me-3">➕</span>
	          <div>
	              <h5 class="mb-1">Crear Cita</h5>
	              <small>Programa una nueva consulta médica.</small>
	          </div>
	      </a>

	      <a th:href="@{/citas/mis_citas}" class="list-group-item list-group-item-action d-flex align-items-center">
	          <span class="fs-3 me-3">📋</span>
	          <div>
	              <h5 class="mb-1">Ver, Editar y Eliminar mis Citas Sanitarias</h5>
	              <small>Consulta todas tus citas agendadas.</small>
	          </div>
	      </a>

	




    <!-- Logout -->
    <div class="text-center mt-5">
      <form th:action="@{/paciente/logout}" method="post">
        <button class="btn btn-outline-success btn-lg">🚪 Cerrar sesión</button>
      </form>
    </div>
  </div>

  <footer class="text-center text-muted mb-4">© 2025 - Sistema de Gestión de Citas</footer>

  <!-- Toasts flotantes -->
  <div class="position-fixed top-0 end-0 p-3" style="z-index: 1100">
    <div th:if="${successMessage}" 
         class="toast align-items-center text-bg-success border-0 show" 
         role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body" th:text="${successMessage}"></div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
      </div>
    </div>
    <div th:if="${error}" 
         class="toast align-items-center text-bg-danger border-0 show" 
         role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body" th:text="${error}"></div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Cerrar"></button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const routes = { '#crear': 'view-crear', '#mis-citas': 'view-mis-citas', '#actualizar': 'view-actualizar', '#eliminar': 'view-eliminar' };
    function showView(hash) {
      const target = routes[hash] || 'view-crear';
      document.querySelectorAll('.spa-view').forEach(v => v.classList.add('d-none'));
      document.getElementById(target).classList.remove('d-none');
      document.querySelectorAll('#spaMenu a').forEach(a => a.classList.remove('active'));
      const activeLink = document.querySelector(`#spaMenu a[href='${hash}']`);
      if (activeLink) activeLink.classList.add('active');
    }
    window.addEventListener('hashchange', () => showView(location.hash));
    window.addEventListener('DOMContentLoaded', () => {
      showView(location.hash || '#crear');
      // Activar toasts automáticamente
      const toastElList = [].slice.call(document.querySelectorAll('.toast'));
      toastElList.forEach(function (toastEl) {
        new bootstrap.Toast(toastEl, { delay: 6000 }).show();
      });
    });
  </script>
</body>
</html>
